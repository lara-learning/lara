type Comment {
  createdAt: String!
  id: ID!
  text: String
  user: UserInterface!
}

"""
An object that can have comments
"""
interface CommentableInterface {
  comments: [Comment!]!
  id: ID!
}

type Company {
  id: String!
  logo: String!
  name: String!
}

type CreateCommentPayload {
  comment: Comment!
  commentable: CommentableInterface!
}

type Day implements CommentableInterface {
  comments: [Comment!]!
  createdAt: String!
  date: String!
  entries: [Entry!]!
  id: ID!
  status: DayStatusEnum
}

enum DayStatusEnum {
  """
  workday
  """
  work

  """
  vacation
  """
  vacation

  """
  sick leave
  """
  sick

  """
  school/university
  """
  education

  """
  public holiday
  """
  holiday
}

"""
Autogenerated return type of DevSetUser
"""
type DevSetUserPayload {
  user: UserInterface
}

type Entry implements CommentableInterface {
  comments: [Comment!]!
  createdAt: String!
  id: ID!
  orderId: Int!
  text: String!
  time: Int!
}

input EntryInput {
  text: String!
  time: Int!
}

type OAuthPayload {
  accessToken: String!
  refreshToken: String
  expiresIn: Int!
}

type MutateEntryPayload {
  day: Day!
  entry: Entry
  report: Report!
}

type MutateTimetablePayload {
  timetables: [Timetable]
}

type UpdateReportPayload {
  trainee: Trainee!
  report: Report!
}

type Mutation {
  """
  [DEV] Login as a user.
  """
  _devloginuser(id: String!): OAuthPayload

  """
  [DEV] Sets the users type.
  """
  _devsetusertype(type: String!): DevSetUserPayload!

  """
  Claims a Trainee by the current Trainer
  """
  claimTrainee(id: ID!): TrainerTraineePayload

  """
  Creates a new comment on a Day which is identified by the id argument.
  """
  createCommentOnDay(text: String!, id: ID!, traineeId: ID!): CreateCommentPayload!

  """
  Creates a new comment on a Entry which is identified by the id argument.
  """
  createCommentOnEntry(text: String!, id: ID!, traineeId: ID!): CreateCommentPayload!

  """
  Creates a new comment on a Report which is identified by the id argument.
  """
  createCommentOnReport(text: String!, id: ID!, traineeId: ID!): CreateCommentPayload!

  """
  Creates a new entry which is assigned to the matching report based on the day Id
  """
  createEntry(dayId: String!, input: EntryInput!): MutateEntryPayload!

  """
  Deletes an entry by the given ID. Only considers entries made by the current user. Returns the ID of the deleted entry.
  """
  deleteEntry(id: ID!): MutateEntryPayload!

  """
  Login via google.
  """
  login(googleToken: String!): OAuthPayload

  """
  Unclaims a Trainee by the current Trainer
  """
  unclaimTrainee(id: ID!): TrainerTraineePayload

  """
  Updates the current trainee
  """
  updateCurrentTrainee(input: UpdateCurrentTraineeInput!): Trainee

  """
  Updates the current user
  """
  updateCurrentUser(input: UserInput): UserInterface

  """
  Updates day which is identified by the id argument.
  """
  updateDay(status: String, id: ID!): Day
  updateEntry(id: ID!, input: EntryInput!): MutateEntryPayload!
  updateEntryOrder(entryId: ID!, dayId: ID!, orderId: Int!): MutateEntryPayload!

  """
  Updates report which is identified by the id argument.
  """
  updateReport(summary: String, department: String, status: String, id: ID!): UpdateReportPayload

  """
  Creates Trainee.
  """
  createTrainee(input: CreateTraineeInput!): Trainee

  """
  Creates Trainer.
  """
  createTrainer(input: CreateTrainerInput!): Trainer

  """
  Marks User to be deleted
  """
  markUserForDeletion(id: ID!): UserInterface

  """
  Unmarks User from deletion
  """
  unmarkUserForDeletion(id: ID!): UserInterface

  """
  Updates Trainee.
  """
  updateTrainee(input: UpdateTraineeInput!, id: ID!): Trainee

  """
  Updates Trainer.
  """
  updateTrainer(input: UpdateTrainerInput!, id: ID!): Trainer

  """
  Updates Timetable settings of Trainee.
  """
  updateTraineeTimetableSettings(input: TimetableUserSettingsInput): Trainee

  """
  Link Alexa account
  """
  linkAlexa(code: String!, state: String!): UserInterface

  """
  Unlink Alexa account
  """
  unlinkAlexa: UserInterface

  """
  Create OAuth Code
  """
  createOAuthCode: String!

  """
  Create timetable
  """
  createTimetable(input: TimetableInput!): Trainee

  """
  Delete timetable by id
  """
  deleteTimetable(timetableId: ID!): Trainee

  """
  Update timetable
  """
  updateTimetable(input: TimetableUpdateInput!): Trainee

  """
  Fills report with timetable content
  """
  autoFillReport(reportId: ID!): Report

  """
  Delete entry in timetable
  """
  deleteTimetableEntry(input: TimetableEntryInput!, timetableId: ID!): Trainee
}

type LaraConfig {
  minWorkDayMinutes: Int!
  maxWorkDayMinutes: Int!
  expectedWorkDayMinutes: Int!

  minEducationDayMinutes: Int!
  maxEducationDayMinutes: Int!

  maxEntryMinutes: Int!

  maxPeriodYearsCount: Int!

  finishedWeekDayCount: Int!
}

type Query {
  config: LaraConfig!

  companies: [Company!]

  """
  Returns the logged in user. This user can be either a Trainee or a Trainer.
  """
  currentUser: UserInterface

  """
  Finds the report for a specifig trainee on the requested year and week.
  """
  reportForTrainee(year: Int!, week: Int!, id: ID!): Report

  """
  Finds the report for the requested year and week.
  """
  reportForYearAndWeek(year: Int!, week: Int!): Report

  """
  Get all Reports for the current User. The result can be filtered by the 'statuses' attribut
  """
  reports(statuses: [ReportStatus!]): [Report]!

  """
  Get all Suggestions
  """
  suggestions: [String!]!

  """
  Get all Trainees
  """
  trainees: [Trainee!]!

  """
  Get all Trainers
  """
  trainers: [Trainer!]!

  """
  Print single report or report batch
  """
  print(ids: [ID!]!): PrintPayload!

  """
  Get a User by ID
  """
  getUser(id: ID!): UserInterface

  """
  Will look for Users to delete
  """
  cleanup: Boolean!

  """
  Get the alexa account linking url
  """
  alexaLinkingUrl: String

  """
  Get all Timetables for Trainee
  """
  timetables(traineeId: ID!): [Timetable]
}

type PrintPayload {
  estimatedWaitingTime: Int!
}

type Report implements CommentableInterface {
  comments: [Comment!]!
  createdAt: String!
  days: [Day!]!
  department: String
  id: ID!
  status: ReportStatus!
  summary: String
  week: Int!
  year: Int!
  reportAccepted: String
  previousReportLink: String
  nextReportLink: String
}

"""
Represents the current state of the report
"""
enum ReportStatus {
  """
  Report is open
  """
  todo

  """
  Passes the report to the trainer
  """
  review

  """
  Used if there is any problem with a report
  """
  reopened

  """
  Done reports are marked as archived
  """
  archived
}

enum Weekday {
  """
  Days of the Week
  """
  monday
  tuesday
  wednesday
  thursday
  friday
  saturday
}

type TimetableUserSettings {
  """
  Settings for Trainee timetable
  """
  onBoardingTimetable: Boolean
  weekendSchool: Boolean
  preFillClass: Boolean
}

type TimetableEntry {
  id: ID!
  day: Weekday!
  timeStart: Int!
  timeEnd: Int!
  subject: String!
  teacher: String
  room: String
  notes: String
}

type Timetable {
  id: ID!
  traineeId: ID!
  title: String!
  dateStart: String!
  dateEnd: String!
  entries: [TimetableEntry!]!
}

type Trainee implements UserInterface {
  avatar: String!
  company: Company!
  course: String
  createdAt: String!
  endDate: String
  endOfToolUsage: String
  firstName: String!
  id: ID!
  language: String
  lastName: String!
  notification: Boolean
  reports: [Report!]!
  signature: String
  startDate: String
  startOfToolUsage: String
  theme: String
  trainer: Trainer
  type: UserTypeEnum!
  username: String!
  email: String!
  deleteAt: String
  openReportsCount: Int!
  alexaSkillLinked: Boolean
  timetableSettings: TimetableUserSettings
  timetables: [Timetable]
}

input TimetableUserSettingsInput {
  onBoardingTimetable: Boolean
  weekendSchool: Boolean
  preFillClass: Boolean
}

input TimetableInput {
  traineeId: ID!
  title: String!
  dateStart: String!
  dateEnd: String!
  entries: [TimetableEntryInput!]!
}

input TimetableUpdateInput {
  id: ID!
  traineeId: ID!
  title: String!
  dateStart: String!
  dateEnd: String!
  entries: [TimetableEntryInput!]!
}

input TimetableEntryInput {
  id: ID
  day: Weekday!
  timeStart: Int!
  timeEnd: Int!
  subject: String!
  teacher: String
  room: String
  notes: String
}

input CreateTraineeInput {
  firstName: String!
  lastName: String!
  email: String!
  startDate: String!
  endDate: String!
  startOfToolUsage: String!
  companyId: String!
}

input UpdateTraineeInput {
  firstName: String
  lastName: String
  email: String
  startDate: String
  endDate: String
  startOfToolUsage: String
  companyId: String
}

input UpdateCurrentTraineeInput {
  course: String
}

input CreateTrainerInput {
  email: String!
  firstName: String!
  lastName: String!
}

input UpdateTrainerInput {
  email: String
  firstName: String
  lastName: String
}

type Trainer implements UserInterface {
  avatar: String!
  createdAt: String!
  firstName: String!
  id: ID!
  language: String
  lastName: String!
  notification: Boolean
  signature: String
  theme: String
  trainees: [Trainee!]!
  type: UserTypeEnum!
  username: String!
  email: String!
  deleteAt: String
  alexaSkillLinked: Boolean
}

type Admin implements UserInterface {
  avatar: String!
  createdAt: String!
  firstName: String!
  id: ID!
  language: String
  lastName: String!
  notification: Boolean
  theme: String
  type: UserTypeEnum!
  username: String!
  email: String!
  signature: String
  alexaSkillLinked: Boolean
}

type TrainerTraineePayload {
  trainee: Trainee!
  trainer: Trainer!
}

input UserInput {
  language: String
  theme: String
  signature: String
  notification: Boolean
}

interface UserInterface {
  avatar: String!
  createdAt: String!
  firstName: String!
  id: ID!
  language: String
  lastName: String!
  notification: Boolean
  signature: String
  theme: String
  type: UserTypeEnum!
  username: String!
  email: String!
  alexaSkillLinked: Boolean
}

enum UserTypeEnum {
  """
  User is a Trainee
  """
  Trainee

  """
  User is a Trainer
  """
  Trainer

  """
  User is an Admin
  """
  Admin
}
